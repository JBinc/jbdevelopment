var tacoApp=angular.module("tacoApp",["TacoModel","hmTouchevents"]);tacoApp.controller("IndexCtrl",function(a,b){a.tacos=[],a.open=function(a){webView=new steroids.views.WebView("/views/taco/show.html?id="+a),steroids.layers.push(webView)},a.loadTacos=function(){a.loading=!0,c.getList().then(function(b){a.tacos=b,a.loading=!1})};var c=b.all("taco");a.loadTacos(),window.addEventListener("message",function(b){"reload"===b.data.status&&a.loadTacos()}),steroids.view.navigationBar.show("Taco index");var d=new steroids.buttons.NavigationBarButton;d.title="Add",d.onTap=function(){var a=new steroids.views.WebView("/views/taco/new.html");steroids.modal.show(a)},steroids.view.navigationBar.setButtons({right:[d]})}),tacoApp.controller("ShowCtrl",function(a,b){a.loadTaco=function(){a.loading=!0,c.get().then(function(b){a.taco=b,a.loading=!1})},localStorage.setItem("currentTacoId",steroids.view.params.id);var c=b.one("taco",steroids.view.params.id);a.loadTaco(),window.addEventListener("message",function(b){"reload"===b.data.status&&a.loadTaco()}),steroids.view.navigationBar.show("Taco: "+steroids.view.params.id);var d=new steroids.buttons.NavigationBarButton;d.title="Edit",d.onTap=function(){webView=new steroids.views.WebView("/views/taco/edit.html"),steroids.modal.show(webView)},steroids.view.navigationBar.setButtons({right:[d]})}),tacoApp.controller("NewCtrl",function(a,b){a.close=function(){steroids.modal.hide()},a.create=function(c){a.loading=!0,b.all("taco").post(c).then(function(){var b={status:"reload"};window.postMessage(b,"*"),a.close(),a.loading=!1},function(){a.loading=!1,alert("Error when creating the object, is Restangular configured correctly, are the permissions set correctly?")})},a.taco={}}),tacoApp.controller("EditCtrl",function(a,b){var c=localStorage.getItem("currentTacoId"),d=b.one("taco",c);a.close=function(){steroids.modal.hide()},a.update=function(b){a.loading=!0,b.put().then(function(){var b={status:"reload"};window.postMessage(b,"*"),a.close(),a.loading=!1},function(){a.loading=!1,alert("Error when editing the object, is Restangular configured correctly, are the permissions set correctly?")})},a.loadTaco=function(){a.loading=!0,d.get().then(function(b){a.taco=b,a.loading=!1})},a.loadTaco()});